<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Upload/Upload.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Upload/Upload.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Page responsible for uploading photos for the user
 * @function Upload
 */

 import './Upload.css'
 import { useState } from 'react'
 import API from '../../fakeAPI';
 import { useSelector } from 'react-redux';
 
 /**
  * 
  * @param {properties} props 
  * @returns {element} Contents of upload page 
  */
 const Upload = (props) => {
 
     const [selectedFile, setSelectedFile] = useState(null);
     const [localImgUrl, setLocalImgUrl] = useState(null);
     const [description, setDescription] = useState("");
     const [tags, setTags] = useState("");
     const [people, setPeople] = useState("");
     const [albums, setAlbums] = useState("");
 
     const currentUserToken = useSelector(state => state.users.currentUser.token);
     const currentUserFirstName = useSelector(state => state.users.currentUser.firstName);
 
 
     var input = document.getElementById("description");
     
     const fileSelectionHandler = (event) => {
             setSelectedFile(event.target.files[0]);
             console.log(event.target.files[0]);
             setLocalImgUrl(URL.createObjectURL(event.target.files[0]));
             console.log("local url: ", URL.createObjectURL(event.target.files[0]));
     }
 
     const uploadHandler = () => {
         console.log(selectedFile);
         const fd = new FormData();
         fd.append("photo",selectedFile);
         fd.append("title",`${currentUserFirstName}_photo`);
         fd.append("description","");
         for(var pair of fd.entries()) {
              console.log(pair[0]+', '+pair[1]);
            }
          console.log("form data: ", fd)
          let data = { photo: fd, Title:'test1',Description:'this is a test' };
          API.post('photo', fd, {
             headers: {
                 "Authorization": `Bearer ${currentUserToken}` 
             }}
             )
              .then(res => {
                  console.log(res)
              }) .catch( res => {
 
                  //alert(res)
                  console.log(res.response)
              })
 
              setLocalImgUrl(null);
         
 
 
     }
 
     return (
         &lt;div>
             &lt;div className='backg'>wut&lt;/div>
             { !localImgUrl &amp;&amp; (
             &lt;div>    
                 &lt;div className='aboveBar'>&lt;/div>
                 &lt;button className='colorButton'>Choose photos and videos to upload&lt;/button>
                 &lt;input className='upload' accept='image/*' type='file' onChange={fileSelectionHandler}/>
             &lt;/div>)}
             { localImgUrl &amp;&amp; (
             &lt;div>
                 &lt;img className='previewImg' width='100' height='100' src={localImgUrl}/>
                 &lt;div className='fileName'>{selectedFile.name}&lt;/div>
                 &lt;div className='sideBar'>&lt;/div>
                 &lt;div className='aboveBar'>
                     &lt;button className='inUpload'onClick={uploadHandler}>Upload&lt;/button>
                 &lt;/div> 
                 &lt;div className='desc'>Add a description
                 &lt;/div>
                 &lt;input className='description'/>
                 &lt;div className='tag'>Add tags&lt;/div>
             &lt;/div> )}
         &lt;/div>
     )
 }
 
 export default Upload;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#arr">arr</a></li><li><a href="global.html#Followers">Followers</a></li><li><a href="global.html#Following">Following</a></li><li><a href="global.html#Upload">Upload</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Tue Jun 08 2021 19:08:41 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
